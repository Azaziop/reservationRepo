import{r as u,j as e,H as M}from"./app-CbXMUvGG.js";import{S}from"./Sidebar-VrN9mjbX.js";function g(n,i){if(!n||!i)return`${n||""} - ${i||""}`;const x=new Date(`1970-01-01T${n}`),s=new Date(`1970-01-01T${i}`);return x>s?`${i} - ${n}`:`${n} - ${i}`}function V({reservations:n,currentMonth:i,currentYear:x}){const[s,c]=u.useState(i),[r,b]=u.useState(x),j=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],p=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],f=new Date(r,s-1,1),v=new Date(r,s,0).getDate(),y=(f.getDay()+6)%7,h=[];for(let t=0;t<y;t++)h.push(null);for(let t=1;t<=v;t++)h.push(t);const w=t=>{if(!t)return[];const l=`${r}-${String(s).padStart(2,"0")}-${String(t).padStart(2,"0")}`;return n.filter(d=>new Date(d.date).toISOString().split("T")[0]===l)},N=()=>{s===1?(c(12),b(r-1)):c(s-1)},k=()=>{s===12?(c(1),b(r+1)):c(s+1)},m=n.filter(t=>{const l=new Date(t.date);return l.getMonth()+1===s&&l.getFullYear()===r});return u.useEffect(()=>{const t=new URL(window.location.href);t.searchParams.set("month",s),t.searchParams.set("year",r),window.history.replaceState({},"",t.toString())},[s,r]),e.jsxs(S,{children:[e.jsx(M,{title:"Calendrier des Réservations"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Calendrier des Réservations"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Vue calendrier de toutes les réservations"})]}),e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("button",{onClick:N,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Précédent"]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[j[s-1]," ",r]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[n.length," réservation",n.length!==1?"s":""," ce mois"]})]}),e.jsxs("button",{onClick:k,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors",children:["Suivant",e.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("div",{className:"grid grid-cols-7 bg-gray-50",children:p.map(t=>e.jsx("div",{className:"p-3 text-center font-semibold text-gray-700 border-b border-gray-200",children:t},t))}),e.jsx("div",{className:"grid grid-cols-7",children:h.map((t,l)=>{const d=w(t),a=t&&new Date().getDate()===t&&new Date().getMonth()+1===s&&new Date().getFullYear()===r;return e.jsx("div",{className:`min-h-[120px] p-2 border-b border-r border-gray-200 ${t?"bg-white hover:bg-gray-50":"bg-gray-50"} ${a?"bg-blue-50 border-blue-200":""}`,children:t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`text-sm font-medium mb-1 ${a?"text-blue-600":"text-gray-900"}`,children:[t,a&&e.jsx("span",{className:"ml-1 inline-flex items-center justify-center w-2 h-2 bg-blue-600 rounded-full"})]}),e.jsxs("div",{className:"space-y-1",children:[d.slice(0,2).map((o,D)=>e.jsxs("div",{className:"text-xs p-1 bg-blue-100 text-blue-800 rounded truncate",title:`${o.room?.name||"Salle"} - ${g(o.start_time,o.end_time)}`,children:[e.jsx("div",{className:"font-medium",children:o.room?.name||"Salle"}),e.jsx("div",{children:g(o.start_time,o.end_time)})]},D)),d.length>2&&e.jsxs("div",{className:"text-xs text-gray-500 text-center bg-gray-100 rounded p-1",children:["+",d.length-2," autres"]})]})]})},l)})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:["Réservations de ",j[s-1]," ",r]}),e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[m.length," réservation",m.length!==1?"s":""]})]}),m.length>0?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:m.map(t=>{const l=a=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800"})[a]||"bg-gray-100 text-gray-800",d=a=>({pending:"En attente",confirmed:"Confirmée",cancelled:"Annulée",completed:"Terminée"})[a]||a;return e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:t.room?.name||"Salle inconnue"}),e.jsx("p",{className:"text-sm text-gray-600",children:t.employee?.name||"Employé inconnu"})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l(t.status)}`,children:d(t.status)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),new Date(t.date).toLocaleDateString("fr-FR")]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),g(t.start_time,t.end_time)]}),t.purpose&&e.jsxs("div",{className:"flex items-start text-sm text-gray-600",children:[e.jsx("svg",{className:"w-4 h-4 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),t.purpose]})]})]},t.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-12 h-12 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:"text-gray-500",children:"Aucune réservation pour ce mois"})]})]})]})]})})})]})}export{V as default};
