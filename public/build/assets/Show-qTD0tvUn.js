import{b as w,r as o,j as e,H,L as k,a as m}from"./app-6GNSV5J8.js";import{S}from"./Sidebar-C4reR9wQ.js";function n({variant:a="default",className:l="",...x}){const h="inline-flex items-center justify-center rounded px-3 py-2 text-sm transition-colors",i={default:"bg-gray-900 text-white hover:bg-black",outline:"border border-gray-300 text-gray-600 hover:text-gray-900",danger:"text-red-600 hover:text-red-700",ghost:"text-gray-700 hover:text-gray-900",secondary:"bg-gray-600 text-white hover:bg-gray-700"};return e.jsx("button",{className:`${h} ${i[a]} ${l}`,...x})}function C(a){const l=new Date(a);return isNaN(l.getTime())?a:l.toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})}function j(a){return a?a.slice(0,5):""}function B({room:a,isOpen:l,onClose:x}){const{user:h}=w().props.auth,i=h?.role==="admin",[u,f]=o.useState([]),[p,y]=o.useState([]),[b,v]=o.useState(!1),[t,g]=o.useState(!1),[r,d]=o.useState({employee_id:"",date:"",start_time:"",end_time:"",purpose:"",notes:""});o.useEffect(()=>{l&&i&&(N(),M())},[l,i]);const N=async()=>{try{v(!0);const s=await fetch(`/rooms/${a.id}/reservations`);if(s.ok){const c=await s.json();f(c)}}catch(s){console.error("Erreur lors du chargement des rÃ©servations:",s)}finally{v(!1)}},M=async()=>{try{const s=await fetch("/api/employees");if(s.ok){const c=await s.json();y(c)}}catch(s){console.error("Erreur lors du chargement des employÃ©s:",s)}},z=s=>{s.preventDefault(),m.post("/reservations",{...r,room_id:a.id},{onSuccess:()=>{g(!1),d({employee_id:"",date:"",start_time:"",end_time:"",purpose:"",notes:""}),N()},onError:c=>{console.error("Erreurs de validation:",c)}})},L=s=>{confirm("ÃŠtes-vous sÃ»r de vouloir annuler cette rÃ©servation ?")&&m.post(`/reservations/${s}/cancel`,{},{onSuccess:()=>{N()}})},R=s=>{const c={pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800"},_={pending:"En attente",confirmed:"ConfirmÃ©e",cancelled:"AnnulÃ©e",completed:"TerminÃ©e"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c[s]||"bg-gray-100 text-gray-800"}`,children:_[s]||s})};return l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Gestion des rÃ©servations - ",a.room_number]}),e.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)]",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(n,{onClick:()=>g(!t),className:"bg-blue-600 text-white hover:bg-blue-700",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nouvelle rÃ©servation"]})}),t&&e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"CrÃ©er une nouvelle rÃ©servation"}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"EmployÃ©"}),e.jsxs("select",{value:r.employee_id,onChange:s=>d({...r,employee_id:s.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"SÃ©lectionner un employÃ©"}),p.map(s=>e.jsxs("option",{value:s.id,children:[s.name," ",s.first_name," - ",s.employee_number]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:r.date,onChange:s=>d({...r,date:s.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Heure de dÃ©but"}),e.jsx("input",{type:"time",value:r.start_time,onChange:s=>d({...r,start_time:s.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Heure de fin"}),e.jsx("input",{type:"time",value:r.end_time,onChange:s=>d({...r,end_time:s.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Objet"}),e.jsx("input",{type:"text",value:r.purpose,onChange:s=>d({...r,purpose:s.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"RÃ©union, formation, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:r.notes,onChange:s=>d({...r,notes:s.target.value}),className:"w-full border border-gray-300 rounded px-3 py-2",rows:3,placeholder:"Informations supplÃ©mentaires..."})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsx(n,{type:"button",onClick:()=>g(!1),variant:"outline",children:"Annuler"}),e.jsx(n,{type:"submit",className:"bg-green-600 text-white hover:bg-green-700",children:"CrÃ©er la rÃ©servation"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"RÃ©servations existantes"}),b?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Chargement..."})]}):u.length>0?e.jsx("div",{className:"space-y-4",children:u.map(s=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[s.employee?.name," ",s.employee?.first_name]}),R(s.status)]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),C(s.date)]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),j(s.start_time)," - ",j(s.end_time)]}),s.purpose&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.purpose]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{href:`/reservations/${s.id}`,className:"text-blue-600 hover:text-blue-800 text-sm",children:"Voir"}),s.status!=="cancelled"&&e.jsx(n,{onClick:()=>L(s.id),variant:"danger",className:"text-xs px-2 py-1",children:"Annuler"})]})]})},s.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{children:"Aucune rÃ©servation pour cette salle"})]})]})]})})]})}):null}function E({room:a}){const{user:l}=w().props.auth,x=l?.role==="admin",[h,i]=o.useState(!1),u=t=>{switch(t){case"conference":return e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm3 1h6v4H7V5zm8 8v2a1 1 0 01-1 1H6a1 1 0 01-1-1v-2h10zm-6-4a1 1 0 100 2 1 1 0 000-2z",clipRule:"evenodd"})});case"office":return e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 00-1 1v14a1 1 0 001 1h12a1 1 0 001-1V3a1 1 0 00-1-1H4zm3 3a1 1 0 000 2h6a1 1 0 100-2H7zm0 4a1 1 0 100 2h6a1 1 0 100-2H7zm0 4a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})});case"training":return e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.75 2.524z"})});default:return e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}},f=t=>{switch(t){case"conference":return"from-purple-500 to-purple-600";case"office":return"from-green-500 to-green-600";case"training":return"from-orange-500 to-orange-600";default:return"from-blue-500 to-blue-600"}},p=t=>({conference:"Salle de confÃ©rence",office:"Bureau",training:"Salle de formation"})[t]||t,y=()=>{m.visit(`/reservations/create?room_id=${a.id}`)},b=()=>{m.visit(`/rooms/${a.id}/edit`)},v=()=>{confirm(`ÃŠtes-vous sÃ»r de vouloir supprimer la salle ${a.room_number} ?`)&&m.delete(`/rooms/${a.id}`,{onSuccess:()=>m.visit("/rooms")})};return e.jsxs(S,{children:[e.jsx(H,{title:`Salle ${a.room_number}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-gray-700 w-8 h-8",children:u(a.type)}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a.room_number}),e.jsx("p",{className:"text-gray-600",children:p(a.type)})]})]})}),e.jsx(k,{href:"/rooms",children:e.jsxs(n,{variant:"outline",className:"flex items-center space-x-2",children:[e.jsx("span",{children:"â†"}),e.jsx("span",{children:"Retour Ã  la liste"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-64 lg:h-80 overflow-hidden rounded-lg",children:e.jsx("div",{className:`w-full h-full bg-gradient-to-r ${f(a.type)} flex items-center justify-center`,children:e.jsx("div",{className:"rounded-full bg-white/10 p-8",children:e.jsx("div",{className:"text-white opacity-90 w-20 h-20",children:u(a.type)})})})}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:"bg-white/90 text-gray-800 px-4 py-2 rounded-full text-sm font-medium backdrop-blur-sm",children:p(a.type)})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"CapacitÃ© maximale"}),e.jsxs("p",{className:"font-medium",children:[a.capacity," personnes"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h3M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Type de salle"}),e.jsx("p",{className:"font-medium",children:p(a.type)})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"NumÃ©ro"}),e.jsx("p",{className:"font-medium",children:a.room_number})]})]})]})]}),a.description&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Description"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:a.description})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Actions"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[x&&e.jsxs(n,{onClick:()=>i(!0),className:"bg-green-600 text-white hover:bg-green-700 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),e.jsx("span",{children:"GÃ©rer rÃ©servations"})]}),e.jsxs(n,{onClick:y,className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),e.jsx("span",{children:"RÃ©server cette salle"})]}),e.jsxs(n,{onClick:b,variant:"outline",className:"flex items-center space-x-2",children:[e.jsx("span",{children:"âœï¸"}),e.jsx("span",{children:"Modifier"})]}),e.jsxs(n,{onClick:v,variant:"danger",className:"flex items-center space-x-2",children:[e.jsx("span",{children:"ðŸ—‘ï¸"}),e.jsx("span",{children:"Supprimer"})]})]})]})]})]}),a.reservations&&a.reservations.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"RÃ©servations Ã  venir"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:a.reservations.map(t=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[t.employee?.first_name," ",t.employee?.name]}),t.purpose&&e.jsx("p",{className:"text-sm text-gray-600",children:t.purpose})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:C(t.date)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[j(t.start_time)," - ",j(t.end_time)]})]})]})},t.id))})]})]}),e.jsx(B,{room:a,isOpen:h,onClose:()=>i(!1)})]})}export{E as default};
